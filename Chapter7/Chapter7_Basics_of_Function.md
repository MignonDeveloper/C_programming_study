# 7. Basics of Function


## Function

**절차지향 프로그래밍**

각종 `항`과 `연산자`(연산식)이 모여 한 개의 `구문`을 이루고, 여러 구문이 의미있는 `절차상의 흐름`을 만들고, 그 절차상의 흐름이 하나로 뭉쳐 `함수`를 이루고, 다시 `함수가 함수를 호출`하여 연계하고 그렇게 또 다른 흐름을 만듦으로써 `C언어 기반 프로그램`이 완성된다.

- <u>항, 연산자 > 구문 > 절차상 흐름(Context) > 함수 > Binding > Program</u>

**함수 = 반환 자료형식 + 이름 + (매개변수 목록)**
> 불연속적인 반복을 통한 코드의 재사용

1. **반환 자료형식** = 피호출 함수를 호출하는 것으로 끝나는지 또는 반드시 **어떤 정보를 전달 받아야하는지를 확정**
2. **이름** = 함수의 이름 또한 **주소 상수**를 의미한다. 또한 함수의 이름을 통해 기능이 무엇인지 직관적으로 알 수 있도록 만들어야 한다.
3. **매개변수** = **피호출자 함수에 반드시 전달되어야 할 정보**가 무엇인지 확정
    - 반환 자료형식과 매개변수가 Caller(호출하는 함수)와 Callee(호출당하는 함수)가 만나는 접점

<br>

## 사용자 정의 함수

`printf`, `scanf`함수 같은 경우는 CRL = **C-Runtime Library**

`main`, `Add` 와 같은 경우는 사용자 정의 함수 = **User-Defined Function**

```cpp
int Add(int a, int b) {     // 함수의 원형
		int nResult;
		nResult = a + b;
		return nResult;
}

void main(void){
		int result;
		result = Add(3,4);
}

```
- 함수의 body(Block Scope)에 함수의 정의가 포함된다.
- `nResult`: 지역변수이자 동시에 자동변수이다.
- 특히 함수 원형에서 선언한 매개변수(`a`, `b`) 또한 block scope에
속하는 지역변수, 자동변수
- `main()`에서 `Add()`를 호출할 때 실인수를 명시해준다.
    - 즉, Add(3,4) → `a = 3` & `b = 4`
    - main이 Add를 Call하고 Add는 main에게 값(**임시결과**)을 반환
    - Add(3,4)에서 `()`는 **함수호출 연산자**로 피연산자는
    **함수형(반환자료형 + 이름 + 매개변수)** 또는 **함수 pointer이다.**

<br>

## 함수 설계 원칙 3가지

**(1) UI와 기능의 분리**

- User Interface란, 인간과 기계가 상호작용할 수 있도록 연결되는 형식을 의미한다. (프로그램에서 입력, 출력 part)
- **함수를 설계할 때, UI에 대한 함수 따로, 각각의 기능에 대한 함수 따로 만들어준다.**
    - ex) 나이를 입력받고(scanf) → 요금 계산을 해준다(lookup 배열) → 요금을 출력(printf)
    - 함수가 많아지는 것을 두려워하지말고, **UI**랑 **기능 1,2,3,4** … 별로 함수를 나누어서 구조적으로 만들어준다.
- 매개변수의 유효성 검사는 Callee가 하는 것
    - 만약, Caller에서 검사를 하면 호출 횟수만큼 코드를 반복하므로 Callee에서 검사

**(2) 재사용 가능한 단위 기능의 구현**

불연속적으로 반복되거나, 다시 사용될 가능성이 높은 코드는 함수로 만드는 것이 좋다. 유지보수의 측면에서 좋음!

**(3) 코드 분할**

덩치가 너무 큰 코드는 변화에 대응하기가 어렵다. 일정 수준 작은 기능단위로 나누어서 여러 함수로 코드로 나누어준다.

<br>

## 함수의 원형 선언

변수와 함수는 문법적으로 **선언(Declaration)과 정의(Definition)가 분리**될 수 있다. 함수의 정의보다 함수를 호출하는 코드가 먼저 등장하는 경우, 함수의 **“원형(Prototype) 선언"**을 소스코드 상단에 기술함으로써 컴파일러에 함수의 존재를 알려야 한다.

- 헤더 파일(`.h`) : 함수의 원형들이 선언되어 있는 파일
- 정의 파일(`.c`) : 선언되어 있는 함수들을 구현한 파일

<br>

## 전역 변수

특정 Block Scope에 속하지 않고 소스 파일 전체에서 접근(파일 스코프)할 수 있는 형태로 선언 및 정의된 변수.

- 그 동안 사용한 지역 & 자동변수와 달리 사용하는 메모리의 영역도 다르고 특징도 다르다.
- 전역변수는 프로그램이 최초 실행될 때 (main 함수가 실행되기도 전)부터 이미 존재하는 것이며 프로그램이 끝날 때까지 사라지지 않고 유지된다. 따라서 전역변수에 저장한 값은 그동안 우리가 본 변수들과 달리 함수를 넘나들며, 전체에서 접근할 수 있다.
- 함수 바깥에서 선언하면된다. -> 앞에 `g_`와 같은 **prefix**를 설정하면 덜 햇갈림

**< Google C++ Style Guide >**

전역변수가 편리한 것은 맞지만, **서로 떨어져 독립적이어야 할 두 코드를 하나로 묶어주는 역할을 수행하는데 이는 설계의 측면에서 부적절**하다. 

→ 불필요한 의존관계를 만들어버린다.